<!DOCTYPE html>
<html>
<head>
	<title> Complains</title>
	<!-- Vendor CSS Files -->
	<link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
	<link href="assets/vendor/aos/aos.css" rel="stylesheet">
	<link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
	<link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
	<link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
	<link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
	<link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  
  
	<link href="assets/css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="style.css">
	<style>
		td.hidden {display: none;}
		th.hidden {display: none;}
        
	</style>



</head>
<body style="background-color:black;">

	<!-- ======= Header ======= -->
	<header id="header" class="fixed-top d-flex align-items-center  header-transparent ">
		<div class="container d-flex align-items-center justify-content-between">
	
		  <div class="logo">
			<h1><a href="index.html">Green Lanka</a></h1>
			<!-- Uncomment below if you prefer to use an image logo -->
			<!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
		  </div>
	
		  <nav id="navbar" class="navbar">
			<ul>>
				<li><a class="nav-link scrollto" href="index.html">Home</a></li>
				<li><a class="nav-link scrollto" href="business_my_business_details.html">View</a></li>
				<li><a class="nav-link scrollto" href="business_update.html">Update</a></li>
				<li><a class="nav-link scrollto" href="collector_registration.html">Collector Registration</a></li>
				<li><a class="nav-link scrollto active" href="handleComplain.html">Complains</a></li>
				<li><a class="nav-link scrollto" href="feedback.html">Feedback</a></li>
				<li><a class="nav-link scrollto" href="chat.html">Chat</a</li>
				<li><a class="nav-link scrollto" href="login.html">Log out</a></li> 
			<i class="bi bi-list mobile-nav-toggle"></i>
		  </nav><!-- .navbar -->
	
		</div>
	  </header><!-- End Header -->



		
  		
  		<!--Table create-->
		  <h1 style="color: blanchedalmond; text-align: center; margin-top: 100px; margin-bottom: 70px;">User Complains</h1>

          <table border="2" align="center" id="ex-table" style='table-layout: fixed; width: 1300px; color: blanchedalmond; margin-left: 50px;'>
            <tr>
              <th class="hidden">qNO</th>
              <th width='60x' style="font-size: 20px;">No</th>
                <th width='300px' style="font-size: 20px;">Collector ID</th>
                <th style="font-size: 20px;">User Name</th>
                <th style="font-size: 20px;">Telephone</th>
                <th style="font-size: 20px;">Complain</th> 					
            </tr>
        </table> 
			<script>
				function getParams(){
					var idx = document.URL.indexOf('?');
					var params = new Array();
					if (idx != -1) {
						var pairs = document.URL.substring(idx+1, document.URL.length).split('&');
						for (var i=0; i<pairs.length; i++){
							nameVal = pairs[i].split('=');
							params[nameVal[0]] = nameVal[1];
						}
					}
					return params;
				}
				params = getParams();
				course = unescape(params["course"]);
				semester = unescape(params["semester"]);
				subject = unescape(params["subject"]);
				lesson = unescape(params["lesson"]);
				
			</script>


			  	<script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-app.js"></script>
				<script src="https://www.gstatic.com/firebasejs/8.1.2/firebase.js"></script>
				<script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-database.js"></script>
				<script src="firebaseconfig.js"></script>

				<script>
					var firebaseConfig = {
						apiKey: "AIzaSyBq2GPGrafTOxAXpll93VrzE9_9F_OgSMk",
  authDomain: "test-web85.firebaseapp.com",
  databaseURL: "https://test-web85-default-rtdb.firebaseio.com",
  projectId: "test-web85",
  storageBucket: "test-web85.appspot.com",
  messagingSenderId: "566035511827",
  appId: "1:566035511827:web:9d980bdac6b0b2176e9de6",
  measurementId: "G-S7XLZ1QJMK"
					};

					// Initialize Firebase
					firebase.initializeApp(firebaseConfig);
				</script>
				
				<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
				<script src="jquery-3.5.1.min.js"></script>
				
				<script>
					var i=1;
					var userDataRef = firebase.database().ref('Complains/');
					userDataRef.once("value").then(function(snapshot) {
						if  (snapshot.exists()){
							var content = '';
							snapshot.forEach(function(childSnapshot) {
							var key = childSnapshot.key;
							var childData = childSnapshot.val();              
							
                            content += '<tr>';
							content += '<td class="hidden">' + key + '</td>';
							content += '<td style="text-align:center">'+ i++ + '</td>';
                            content += '<td>' + childSnapshot.val().collectedId; + '</td>';
                            content += '<td>' + childSnapshot.val().Username; + '</td>';
                            content += '<td>' + childSnapshot.val().Contact; + '</td>';
							content += '<td>' + childSnapshot.val().Complain; + '</td>';
							content += '</tr>'
							
						});
						$('#ex-table').append(content);
						
						}
						else{
							
							window.alert("No Questions");

						}
						
					});

					
					
					

				</script>

	

</body>

</html>